(function(t){function o(o){for(var i,n,l=o[0],h=o[1],d=o[2],a=0,m=[];a<l.length;a++)n=l[a],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);c&&c(o);while(m.length)m.shift()();return r.push.apply(r,d||[]),e()}function e(){for(var t,o=0;o<r.length;o++){for(var e=r[o],i=!0,l=1;l<e.length;l++){var h=e[l];0!==s[h]&&(i=!1)}i&&(r.splice(o--,1),t=n(n.s=e[0]))}return t}var i={},s={app:0},r=[];function n(o){if(i[o])return i[o].exports;var e=i[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=i,n.d=function(t,o,e){n.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,o){if(1&o&&(t=n(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var i in t)n.d(e,i,function(o){return t[o]}.bind(null,i));return e},n.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],h=l.push.bind(l);l.push=o,l=l.slice();for(var d=0;d<l.length;d++)o(l[d]);var c=h;r.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("56d7")},"034f":function(t,o,e){"use strict";e("85ec")},"56d7":function(t,o,e){"use strict";e.r(o);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),s=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"container",staticStyle:{display:"flex"}},[e("div",{staticStyle:{display:"flex","margin-right":"20px"}},[e("draggable",{staticStyle:{border:"1px solid red",padding:"20px"},attrs:{group:"inputs",list:t.defaultArr,"ghost-class":"ghost"},on:{end:t.checkOneElemEnd}},t._l(t.defaultArr,(function(o,i){return e("div",{key:i},[o.active?e("div",{staticClass:"elem"},[t._v(t._s(o.desc))]):t._e()])})),0)],1),e("div",{staticStyle:{width:"100%"}},[t._l(t.rows,(function(o,i){return e("div",{key:i,staticStyle:{display:"flex"}},t._l(o,(function(o,s){return null!==o.name?e("draggable",{key:s,staticClass:"row",class:o.items[0]?"width_"+o.items[0].width:"",staticStyle:{border:"1px solid red",padding:"20px",display:"inline-block"},attrs:{list:o.items,group:"inputs","ghost-class":"ghost","data-column":o.name,"data-row":i},on:{end:t.checkOneElemEnd}},[o.items.length?e("div",{staticClass:"elem",staticStyle:{display:"flex","justify-content":"space-between"}},[e("span",[t._v(t._s(o.items[0].width)+" ) ")]),e("span",[t._v(t._s(i)+" - "+t._s(o.name))]),e("span",[t._v(t._s(o.items[0].desc))]),e("div",{staticStyle:{display:"flex"}},[e("button",{on:{click:function(e){t.changeWidthElem(Number(i),Number(o.name),"-")}}},[t._v(" < ")]),e("button",{on:{click:function(e){t.changeWidthElem(Number(i),Number(o.name),"+")}}},[t._v(" > ")])])]):t._e()]):t._e()})),1)})),e("div",{staticStyle:{display:"flex","justify-content":"center"}},[t.defaultArr.length?e("button",{staticClass:"addRow",on:{click:t.addRow}},[t._v(" addRow ")]):t._e()])],2)])},r=[],n=(e("b64b"),e("a9e3"),e("a434"),e("b0c0"),e("159b"),e("d81d"),e("b76a")),l=e.n(n),h={BlockpageSearcher:{active:!0,fields:[{desc:"Пункт продажи",type:"SELECT",query:"sale_point_main",active:!0,width:1,coords:{row:null,column:null}},{desc:"Эл. билет",type:"BOOLEAN",query:"flag_e_ticket",active:!0,width:1},{desc:"ИПТ?",type:"BOOLEAN",query:"flag_ipt",active:!0,width:1},{desc:"Возврат",type:"BOOLEAN",query:"flag_return",active:!0,width:1},{desc:"Из-за того что либо название нас. пунка, либо станции",type:"SELECT",query:"sale_city_locale",active:!1,width:1},{desc:"",type:"SELECT",query:"region",active:!1,width:1},{desc:"Организация",type:"BOOLEAN",query:"flag_org_group",active:!0,width:1},{desc:"Дальний",type:"BOOLEAN",query:"long_distance",active:!0,width:1},{desc:"Ближний",type:"BOOLEAN",query:"suburban",active:!0,width:1},{desc:"Отложенно",type:"BOOLEAN",query:"flag_deferred_payment",active:!0,width:1},{desc:"Межнационально",type:"BOOLEAN",query:"flag_international",active:!0,width:1}]}},d={name:"App",components:{draggable:l.a},data:function(){return{defaultArr:[],rows:[[{name:0,items:[]},{name:1,items:[]},{name:2,items:[]},{name:3,items:[]}]],coordFromRow:null,coordFromColumn:null,coordToRow:null,coordToColumn:null,fromElem:null,toElem:null,toElemWidth:null}},mounted:function(){this.defaultArr=h.BlockpageSearcher.fields.reduce((function(t,o){return o.active&&t.push(o),t}),[])},watch:{},methods:{updateWidthElem:function(){this.toElemWidth=this.rows[this.coordToRow][this.coordToColumn].items[0].width},updateCoords:function(t,o){this.coordToRow=t,this.coordToColumn=o,this.fromElem=this.rows[this.coordFromRow][this.coordFromColumn],this.toElem=this.rows[this.coordToRow][this.coordToColumn],this.updateWidthElem()},checkOneElemEnd:function(t){Object.keys(t.to.dataset).length?(this.coordFromRow=Object.keys(t.from.dataset).length?Number(t.from.dataset.row):Number(t.to.dataset.row),this.coordFromColumn=Object.keys(t.from.dataset).length?Number(t.from.dataset.column):Number(t.to.dataset.column),this.updateCoords(Number(t.to.dataset.row),Number(t.to.dataset.column)),this.twoElemInOneBlock(),1!==this.toElemWidth&&this.updateMove()):(console.log(12),this.removeNameToNull(!0))},twoElemInOneBlock:function(){if(2===this.toElem.items.length){var t=this.rows[this.coordToRow][this.coordToColumn].items.splice(1,1);this.rows[this.rows.length-1][0].items.length?this.addRow(t[0]):(this.addDefaultArr(t[0]),alert("Заполните первое поле"))}},addDefaultArr:function(t){this.defaultArr.push(t)},addRow:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.rows[this.rows.length-1][0].items.length?t.desc?(this.rows.push([{name:0,items:[t]},{name:1,items:[]},{name:2,items:[]},{name:3,items:[]}]),this.updateCoords(this.rows.length-1,0),this.removeNameToNull(!0)):this.rows.push([{name:0,items:[]},{name:1,items:[]},{name:2,items:[]},{name:3,items:[]}]):alert("Заполните первое поле")},updateMove:function(){return this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-1]?this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-1].items.length?(this.removeNameToNull(!0),void this.resetWidth()):3===this.toElemWidth&&this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-2].items.length||4===this.toElemWidth&&(this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-2].items.length||this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-3].items.length)?(this.removeNameToNull(!0,!0),void this.resetWidth()):(this.removeNameToNull(!0),void this.addNameToNull(!0)):(this.removeNameToNull(!0,!0),void this.resetWidth())},changeWidthElem:function(t,o,e){this.updateCoords(t,o),this.validateWidthElem(e)},validateWidthElem:function(t){switch(t){case"+":if(!this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth])return;if(this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth].items.length)return;this.increaseWidthElem(),this.addNameToNull();break;case"-":if(1===this.toElemWidth)return;this.reduceWidthElem(),this.removeNameToNull();break}},forThreeElWidth:function(){this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-1].name=this.coordFromColumn+this.toElemWidth-1,this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-2].name=this.coordFromColumn+this.toElemWidth-2},removeNameToNull:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o&&(3===this.toElemWidth?this.forThreeElWidth():4===this.toElemWidth?(this.forThreeElWidth(),this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-3].name=this.coordFromColumn+this.toElemWidth-3):this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-1].name=this.coordFromColumn+this.toElemWidth-1),t&&4===this.toElemWidth&&(this.forThreeElWidth(),this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-3].name=this.coordFromColumn+this.toElemWidth-3),t&&3===this.toElemWidth&&(console.log("12345"),this.forThreeElWidth()),t?this.rows[this.coordFromRow][this.coordFromColumn+this.toElemWidth-1].name=this.coordFromColumn+this.toElemWidth-1:this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth].name=this.coordToColumn+this.toElemWidth,this.debag()},addNameToNull:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&4===this.toElemWidth&&(this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-1].name=null,this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-2].name=null,this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-3].name=null),t&&3===this.toElemWidth&&(this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-1].name=null,this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-2].name=null),this.rows[this.coordToRow][this.coordToColumn+this.toElemWidth-1].name=null},increaseWidthElem:function(){this.rows[this.coordToRow][this.coordToColumn].items[0].width+=1,this.updateWidthElem()},reduceWidthElem:function(){this.rows[this.coordToRow][this.coordToColumn].items[0].width-=1,this.updateWidthElem()},resetWidth:function(){this.rows[this.coordToRow][this.coordToColumn].items[0].width=1,this.updateWidthElem()},debag:function(){console.log("---START---"),this.rows.forEach((function(t,o){console.log("-- ".concat(o++," --")),t.map((function(t){console.log(t.name)}))})),console.log("---END---")}}},c=d,a=(e("034f"),e("2877")),m=Object(a["a"])(c,s,r,!1,null,null,null),u=m.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(u)}}).$mount("#app")},"85ec":function(t,o,e){}});
//# sourceMappingURL=app.05d83bdd.js.map